
<p>You can install Riak on FreeBSD for the AMD64 architecture with a binary package or by building from source code.</p>

<h2 id="installing-from-binary-package">Installing From Binary Package</h2>

<blockquote>
  <p><strong>Note:</strong> The Riak 1.2 binary package is supported on FreeBSD version 9. Users have reported success building Riak from source on a number of FreeBSD versions, however.</p>
</blockquote>

<p>Installing Riak from a binary package is the simplest method with least required dependencies, and requires less time to complete than building from source.</p>

<h3 id="prerequisites-and-dependencies">Prerequisites and Dependencies</h3>

<p>Riak depends on <code class="language-plaintext highlighter-rouge">sudo</code> to be installed if the Riak command line tools are to be executed by users other than the <em>riak</em> user. Please ensure that <code class="language-plaintext highlighter-rouge">sudo</code> is installed via packages or the ports collection prior to installing the Riak package.</p>

<p>The Riak binary package also depends on a packaged version of OpenSSL. Prior to installing Riak 1.2 on FreeBSD 9, you’ll need to install <code class="language-plaintext highlighter-rouge">openssl-1.0.0_7</code> either from package or the ports collection.</p>

<h3 id="installation">Installation</h3>

<p>You can install the Riak binary package on FreeBSD remotely using the
<code class="language-plaintext highlighter-rouge">pkg_add</code> remote option. For this example, we’re installing <code class="language-plaintext highlighter-rouge">riak-2.2.1-FreeBSD-amd64.tbz</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pkg_add <span class="nt">-r</span> http://s3.amazonaws.com/downloads.basho.com/riak/2.2/2.2.1/freebsd/9/riak-2.2.1-FreeBSD-amd64.tbz
</code></pre></div></div>

<p>When Riak is installed, a message is displayed with information about the installation and available documentation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Thank you for installing Riak.

Riak has been installed in /usr/local owned by user:group riak:riak

The primary directories are:

    {platform_bin_dir, "/usr/local/sbin"}
    {platform_data_dir, "/var/db/riak"}
    {platform_etc_dir, "/usr/local/etc/riak"}
    {platform_lib_dir, "/usr/local/lib/riak"}
    {platform_log_dir, "/var/log/riak"}

These can be configured and changed in the platform_etc_dir/app.config.

Add /usr/local/sbin to your path to run the riak and riak-admin scripts directly.

Man pages are available for riak(1) and riak-admin(1)
</code></pre></div></div>

<p>If instead of this message, you receive an error during installation regarding OpenSSL, similar to this one:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Package dependency openssl-1.0.0_7 for /tmp/riak-2.2.1-FreeBSD-amd64.tbz not found!
</code></pre></div></div>

<p>Be sure that you’ve installed the required OpenSSL version from packages or the ports collection as described in the <strong>Prerequisites and Dependencies</strong> section.</p>

<h2 id="installing-from-source">Installing From Source</h2>

<p>Installing Riak from source on FreeBSD is a straightforward process which requires installation of more dependencies (such as Erlang) prior to building, and requires more time than a binary package installation.</p>

<p>That said, installing from source provides for greater flexibility with respect to configuration, data root locations, and more fine grained control over specific dependency versions.</p>

<h3 id="prerequisites-and-dependencies-1">Prerequisites and Dependencies</h3>

<p>When building and installing Riak from source, you might be required to install some prerequisite software before proceeding with the build.</p>

<p>If you do not currently have the following software installed, please install it with packages or the ports collection before proceeding.</p>

<ul>
  <li>Erlang (<a href="/riak/kv/2.2.1/setup/installing/source/erlang">Installing Erlang</a>)</li>
  <li>Curl</li>
  <li>Git</li>
  <li>OpenSSL (version 1.0.0_7)</li>
  <li>Python</li>
  <li>sudo</li>
</ul>

<h3 id="installation-1">Installation</h3>
<p>First download the version you wish to install from <a href="/riak/kv/2.2.1/downloads/">Basho downloads</a>.</p>

<p>Next, unpack and build a release from source:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar </span>zxf &lt;riak-x.x.x&gt;
<span class="nb">cd </span>riak-x.x.x
gmake rel
</code></pre></div></div>

<p>Upon conclusion of the build, the <code class="language-plaintext highlighter-rouge">rel/riak</code> directory will contain a full Riak node environment, including configuration, data, and log directories:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin               <span class="c"># Riak binaries</span>
data              <span class="c"># Riak data and metadata</span>
erts-5.9.2        <span class="c"># Erlang Run-Time System</span>
etc               <span class="c"># Riak Configuration</span>
lib               <span class="c"># Third party libraries</span>
log               <span class="c"># Operational logs</span>
releases          <span class="c"># Release information</span>
</code></pre></div></div>

<p>If you’d prefer to build a development environment consisting of 4 nodes which can be run as a cluster on one machine, specify the <code class="language-plaintext highlighter-rouge">devrel</code> target instead of the <code class="language-plaintext highlighter-rouge">rel</code> target, like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gmake devrel
</code></pre></div></div>

<h2 id="next-steps">Next Steps</h2>

<p>Now that Riak is installed, check out <a href="/riak/kv/2.2.1/setup/installing/verify">Verifying a Riak Installation</a>.</p>
